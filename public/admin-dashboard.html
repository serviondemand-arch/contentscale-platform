<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Admin Dashboard - ContentScale</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .tab-button {
      transition: all 0.2s;
    }
    .tab-button.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
  
  <!-- Login Screen -->
  <div id="login-screen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900">
    <div class="bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-md border border-purple-500">
      <div class="flex items-center justify-center mb-6">
        <span class="text-4xl">ğŸ‘‘</span>
        <h1 class="text-2xl font-bold ml-3 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
          Super Admin Dashboard
        </h1>
      </div>
      <p class="text-gray-400 text-center mb-6">ContentScale Platform Control Center</p>
      
      <div id="login-error" class="hidden mb-4 p-3 bg-red-900 border border-red-700 rounded text-red-200 text-sm"></div>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-300 mb-2">Username</label>
          <input type="text" id="login-username" 
            class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-white"
            placeholder="Enter username">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-300 mb-2">Password</label>
          <input type="password" id="login-password" 
            class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-white"
            placeholder="Enter password">
        </div>
        
        <button onclick="login()" id="login-btn"
          class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-lg font-semibold transition-all transform hover:scale-105">
          Login
        </button>
      </div>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div id="main-dashboard" class="hidden">
    <!-- Header -->
    <header class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
          <span class="text-3xl">ğŸ‘‘</span>
          <div>
            <h1 class="text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
              Super Admin Dashboard
            </h1>
            <p class="text-xs text-gray-400">ContentScale Platform Control Center</p>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-sm text-gray-400">
            Logged in as: <span class="text-blue-400 font-semibold" id="admin-username"></span>
          </span>
          <button onclick="logout()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-semibold transition-all">
            Logout
          </button>
        </div>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-gray-800 border-b border-gray-700 sticky top-[73px] z-40">
      <div class="max-w-7xl mx-auto px-4">
        <div class="flex space-x-1 overflow-x-auto">
          <button onclick="switchTab('overview')" class="tab-button active px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap">
            ğŸ“Š Overview
          </button>
          <button onclick="switchTab('admins')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ‘¥ Admins
          </button>
          <button onclick="switchTab('agencies')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ¢ Agencies
          </button>
          <button onclick="switchTab('clients')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ‘¤ All Clients
          </button>
          <button onclick="switchTab('scans')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ” All Scans
          </button>
          <button onclick="switchTab('share-links')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ”— Share Links
          </button>
          <button onclick="switchTab('leaderboard')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ† Leaderboard
          </button>
          <button onclick="switchTab('lead-scanner')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ¯ Lead Scanner
          </button>
          <button onclick="switchTab('contentscore')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ“Š ContentScore
          </button>
          <button onclick="switchTab('code-generators')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ¨ Code Generators
          </button>
          <button onclick="switchTab('ltd-codes')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ’° LTD Codes
          </button>
          <button onclick="switchTab('settings')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            âš™ï¸ Settings
          </button>
          <button onclick="switchTab('handleiding')" class="tab-button px-4 py-3 rounded-t-lg text-sm font-medium whitespace-nowrap hover:bg-gray-700">
            ğŸ“š Handleiding
          </button>
        </div>
      </div>
    </nav>

    <!-- Tab Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
      
      <!-- Overview Tab -->
      <div id="tab-overview" class="tab-content">
        <h2 class="text-2xl font-bold mb-6">Platform Overview</h2>
        
        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <div class="stat-card p-6 rounded-lg shadow-lg text-white">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm opacity-90">Total Agencies</p>
                <p class="text-3xl font-bold mt-2" id="stat-total-agencies">-</p>
              </div>
              <span class="text-5xl opacity-50">ğŸ¢</span>
            </div>
          </div>
          
          <div class="stat-card p-6 rounded-lg shadow-lg text-white">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm opacity-90">Total Clients</p>
                <p class="text-3xl font-bold mt-2" id="stat-total-clients">-</p>
              </div>
              <span class="text-5xl opacity-50">ğŸ‘¥</span>
            </div>
          </div>
          
          <div class="stat-card p-6 rounded-lg shadow-lg text-white">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm opacity-90">Total Scans</p>
                <p class="text-3xl font-bold mt-2" id="stat-total-scans">-</p>
              </div>
              <span class="text-5xl opacity-50">ğŸ”</span>
            </div>
          </div>
          
          <div class="stat-card p-6 rounded-lg shadow-lg text-white">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm opacity-90">Active Helpers</p>
                <p class="text-3xl font-bold mt-2" id="stat-active-helpers">-</p>
              </div>
              <span class="text-5xl opacity-50">ğŸ¤</span>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-gray-800 rounded-lg p-6 shadow-lg mb-8">
          <h3 class="text-xl font-bold mb-4">Quick Actions</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <button onclick="switchTab('agencies')" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition-all">
              â• Add Agency
            </button>
            <button onclick="switchTab('admins')" class="p-4 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition-all">
              ğŸ‘¤ Add Helper
            </button>
            <button onclick="switchTab('share-links')" class="p-4 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition-all">
              ğŸ”— Create Share Link
            </button>
            <button onclick="switchTab('leaderboard')" class="p-4 bg-orange-600 hover:bg-orange-700 rounded-lg font-semibold transition-all">
              ğŸ¯ Scan Leads
            </button>
          </div>
        </div>

        <!-- Platform Health -->
        <div class="bg-gray-800 rounded-lg p-6 shadow-lg">
          <h3 class="text-xl font-bold mb-4">Platform Health</h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
              <span>Database Connection</span>
              <span class="text-green-400 font-semibold">âœ… Connected</span>
            </div>
            <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
              <span>API Status</span>
              <span class="text-green-400 font-semibold">âœ… Operational</span>
            </div>
            <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
              <span>Auto-Scan Service</span>
              <span class="text-yellow-400 font-semibold">â¸ï¸ Paused</span>
            </div>
            <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
              <span>Last Backup</span>
              <span class="text-gray-400">2 hours ago</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Agencies Tab -->
      <div id="tab-agencies" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold">All Agencies</h2>
          <button onclick="showAddAgencyModal()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition-all">
            â• Add Agency
          </button>
        </div>

        <div id="agencies-loading" class="text-center py-12">
          <div class="inline-block animate-spin text-4xl">â³</div>
          <p class="text-gray-400 mt-4">Loading agencies...</p>
        </div>

        <div id="agencies-list" class="hidden bg-gray-800 rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-700">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Name</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Domain</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Country</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Plan</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Clients</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Scans</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Status</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                </tr>
              </thead>
              <tbody id="agencies-tbody" class="divide-y divide-gray-700">
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Clients Tab -->
      <div id="tab-clients" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">All Clients</h2>

        <div id="clients-loading" class="text-center py-12">
          <div class="inline-block animate-spin text-4xl">â³</div>
          <p class="text-gray-400 mt-4">Loading clients...</p>
        </div>

        <div id="clients-list" class="hidden bg-gray-800 rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-700">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Client URL</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Agency</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Scans</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Last Scan</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                </tr>
              </thead>
              <tbody id="clients-tbody" class="divide-y divide-gray-700">
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Scans Tab -->
      <div id="tab-scans" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">All Scans</h2>

        <div id="scans-loading" class="text-center py-12">
          <div class="inline-block animate-spin text-4xl">â³</div>
          <p class="text-gray-400 mt-4">Loading scans...</p>
        </div>

        <div id="scans-list" class="hidden bg-gray-800 rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-700">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold">URL</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Score</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Quality</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Agency/Client</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Type</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Date</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                </tr>
              </thead>
              <tbody id="scans-tbody" class="divide-y divide-gray-700">
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Share Links Tab -->
      <div id="tab-share-links" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold">Share Links</h2>
          <button onclick="showCreateShareLinkModal()" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition-all">
            â• Create Share Link
          </button>
        </div>

        <div id="share-links-loading" class="text-center py-12">
          <div class="inline-block animate-spin text-4xl">â³</div>
          <p class="text-gray-400 mt-4">Loading share links...</p>
        </div>

        <div id="share-links-list" class="hidden bg-gray-800 rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-700">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Client</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Email</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Usage</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Expires</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Status</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                </tr>
              </thead>
              <tbody id="share-links-tbody" class="divide-y divide-gray-700">
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Leaderboard Tab -->
      <div id="tab-leaderboard" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold">Global Leaderboard Management</h2>
          <button onclick="scanAllAgencies()" class="px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg font-semibold transition-all">
            ğŸ” Scan Alle Agencies Nu
          </button>
        </div>

        <div class="mb-4 flex gap-4">
          <input type="text" id="leaderboard-search" placeholder="Search by URL, company, or score..." 
            class="flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
          <button onclick="searchLeaderboard()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold">
            Search
          </button>
        </div>

        <div id="leaderboard-list" class="bg-gray-800 rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-700">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Rank</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Company</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">URL</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Score</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Country</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                </tr>
              </thead>
              <tbody id="leaderboard-tbody" class="divide-y divide-gray-700">
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Admins Tab -->
      <div id="tab-admins" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold">Admin & Helper Management</h2>
          <button onclick="showAddAdminModal()" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition-all">
            â• Add Admin/Helper
          </button>
        </div>

        <div id="admins-loading" class="text-center py-12">
          <div class="inline-block animate-spin text-4xl">â³</div>
          <p class="text-gray-400 mt-4">Loading admins...</p>
        </div>

        <div id="admins-list" class="hidden bg-gray-800 rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-700">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Username</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Full Name</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Email</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Role</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Status</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Created</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Last Login</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                </tr>
              </thead>
              <tbody id="admins-tbody" class="divide-y divide-gray-700">
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="tab-lead-scanner" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">Lead Scanner</h2>
        <p class="text-gray-400">Coming soon...</p>
      </div>

      <div id="tab-contentscore" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">ContentScore Tool</h2>
        <iframe src="/seo-contentscore" class="w-full h-screen border-0 rounded-lg"></iframe>
      </div>

      <!-- Code Generators Tab -->
      <div id="tab-code-generators" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">ğŸ¨ Code Generators - Professional Badges & Banners</h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          
          <!-- Circular Score Badge Generator -->
          <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <span class="text-3xl mr-3">ğŸ†</span>
              Circular Score Badge Generator
            </h3>
            
            <div class="space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Score (0-100)</label>
                  <input type="number" id="badge-score" value="85" min="0" max="100" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"
                    oninput="generateCircularBadge()">
                </div>
                
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Size</label>
                  <select id="badge-size" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"
                    onchange="generateCircularBadge()">
                    <option value="120">Small (120px)</option>
                    <option value="180" selected>Medium (180px)</option>
                    <option value="240">Large (240px)</option>
                  </select>
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-3 text-gray-300">Quality Level (Auto-detected)</label>
                <div class="grid grid-cols-2 gap-2 text-sm">
                  <div class="p-2 bg-green-900 bg-opacity-30 border border-green-700 rounded text-green-400">
                    <strong>90-100:</strong> Excellent
                  </div>
                  <div class="p-2 bg-blue-900 bg-opacity-30 border border-blue-700 rounded text-blue-400">
                    <strong>80-89:</strong> Good
                  </div>
                  <div class="p-2 bg-yellow-900 bg-opacity-30 border border-yellow-700 rounded text-yellow-400">
                    <strong>70-79:</strong> Average
                  </div>
                  <div class="p-2 bg-orange-900 bg-opacity-30 border border-orange-700 rounded text-orange-400">
                    <strong>60-69:</strong> Below Average
                  </div>
                  <div class="p-2 bg-red-900 bg-opacity-30 border border-red-700 rounded text-red-400 col-span-2">
                    <strong>0-59:</strong> Poor
                  </div>
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Live Preview</label>
                <div id="badge-preview" class="bg-gradient-to-br from-gray-900 to-gray-800 p-8 rounded-lg border border-gray-700 flex items-center justify-center min-h-[250px]">
                  <!-- Preview will be inserted here -->
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">HTML Code (Copy & Paste)</label>
                <div class="relative">
                  <textarea id="badge-code" readonly 
                    class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg text-green-400 font-mono text-xs leading-relaxed"
                    rows="10"></textarea>
                  <button onclick="copyBadgeCode()" 
                    class="absolute top-2 right-2 px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs font-semibold transition-all">
                    ğŸ“‹ Copy
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- CTA Banner Generator -->
          <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <span class="text-3xl mr-3">ğŸ“¢</span>
              CTA Banner Generator
            </h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Headline</label>
                <input type="text" id="banner-headline" value="Get Your FREE SEO Content Score" 
                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                  oninput="generateBanner()">
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Subheadline</label>
                <input type="text" id="banner-subheadline" value="Analyse your content with our AI-powered GRAAF Framework" 
                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                  oninput="generateBanner()">
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Button Text</label>
                <input type="text" id="banner-button" value="Scan Now - Free!" 
                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                  oninput="generateBanner()">
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Link URL</label>
                <input type="url" id="banner-url" value="https://contentscale.com/scan" 
                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                  oninput="generateBanner()">
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Live Preview</label>
                <div id="banner-preview" class="bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-lg border border-gray-700 min-h-[200px]">
                  <!-- Preview will be inserted here -->
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">HTML Code (Copy & Paste)</label>
                <div class="relative">
                  <textarea id="banner-code" readonly 
                    class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg text-green-400 font-mono text-xs leading-relaxed"
                    rows="10"></textarea>
                  <button onclick="copyBannerCode()" 
                    class="absolute top-2 right-2 px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded text-xs font-semibold transition-all">
                    ğŸ“‹ Copy
                  </button>
                </div>
              </div>
            </div>
          </div>
          
        </div>
        
        <!-- ============================================ -->
        <!-- CTA BARS SECTION - NEW! -->
        <!-- ============================================ -->
        <h2 class="text-2xl font-bold my-8 pt-6 border-t border-gray-700">ğŸš€ WordPress CTA Bars - contentscale.site Integration</h2>
        
        <div class="grid grid-cols-1 gap-6">
          
          <!-- Top Banner Generator -->
          <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <span class="text-3xl mr-3">â¬†ï¸</span>
              Top Banner Generator (Always Visible)
            </h3>
            
            <div class="space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Headline</label>
                  <input type="text" id="top-banner-headline" value="Free ContentScore Scanner!" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                    oninput="generateTopBanner()">
                </div>
                
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Subheadline</label>
                  <input type="text" id="top-banner-sub" value="Get your score in 30 seconds" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                    oninput="generateTopBanner()">
                </div>
              </div>
              
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Button Text</label>
                  <input type="text" id="top-banner-btn" value="Try Free Scanner â†’" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                    oninput="generateTopBanner()">
                </div>
                
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Link URL</label>
                  <input type="url" id="top-banner-link" value="https://app.contentscale.site/#scanner" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"
                    oninput="generateTopBanner()">
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">HTML Code (Copy & Paste to WordPress)</label>
                <div class="relative">
                  <textarea id="top-banner-code" readonly 
                    class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg text-green-400 font-mono text-xs leading-relaxed"
                    rows="8"></textarea>
                  <button onclick="copyTopBannerCode()" 
                    class="absolute top-2 right-2 px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded text-xs font-semibold transition-all">
                    ğŸ“‹ Copy
                  </button>
                </div>
              </div>
              
              <div class="bg-purple-900 bg-opacity-20 border border-purple-700 rounded-lg p-4">
                <p class="text-sm text-purple-200">
                  <strong>ğŸ’¡ Usage:</strong> Purple top banner, shows after 1 second, always visible, user can close. Perfect for immediate attention!
                </p>
              </div>
            </div>
          </div>
          
          <!-- Bottom Sticky Bar Generator -->
          <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <span class="text-3xl mr-3">â¬‡ï¸</span>
              Bottom Sticky Bar Generator (Scroll Bar)
            </h3>
            
            <div class="space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Headline</label>
                  <input type="text" id="bottom-bar-headline" value="Try Our Free ContentScore Scanner!" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500"
                    oninput="generateBottomBar()">
                </div>
                
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Subheadline</label>
                  <input type="text" id="bottom-bar-sub" value="Get your score in 30 seconds - No signup required" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500"
                    oninput="generateBottomBar()">
                </div>
              </div>
              
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Button Text</label>
                  <input type="text" id="bottom-bar-btn" value="Scan Your Site Free â†’" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500"
                    oninput="generateBottomBar()">
                </div>
                
                <div>
                  <label class="block text-sm font-medium mb-2 text-gray-300">Link URL</label>
                  <input type="url" id="bottom-bar-link" value="https://app.contentscale.site/#scanner" 
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500"
                    oninput="generateBottomBar()">
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">HTML Code (Copy & Paste to WordPress)</label>
                <div class="relative">
                  <textarea id="bottom-bar-code" readonly 
                    class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg text-green-400 font-mono text-xs leading-relaxed"
                    rows="8"></textarea>
                  <button onclick="copyBottomBarCode()" 
                    class="absolute top-2 right-2 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-xs font-semibold transition-all">
                    ğŸ“‹ Copy
                  </button>
                </div>
              </div>
              
              <div class="bg-green-900 bg-opacity-20 border border-green-700 rounded-lg p-4">
                <p class="text-sm text-green-200">
                  <strong>ğŸ’¡ Usage:</strong> Green bottom bar, shows after 3 seconds, sticky scroll bar, user can close. Perfect for engaged readers!
                </p>
              </div>
            </div>
          </div>
          
          <!-- Both Bars Combined Generator -->
          <div class="bg-gray-800 rounded-lg p-6 border border-orange-700">
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <span class="text-3xl mr-3">ğŸ”¥</span>
              BOTH BARS COMBINED (Maximum Conversion!)
            </h3>
            
            <div class="space-y-4">
              <div class="bg-orange-900 bg-opacity-30 border border-orange-700 rounded-lg p-4">
                <p class="text-sm text-orange-200 mb-3">
                  <strong>âš¡ RECOMMENDED:</strong> Use both bars together for 40-50% CTR (vs 5% without)!
                </p>
                <ul class="text-xs text-orange-100 space-y-1">
                  <li>âœ… Top banner catches early visitors (1 second delay)</li>
                  <li>âœ… Bottom bar catches engaged readers (3 second delay)</li>
                  <li>âœ… 2X conversion opportunities = 8-10X better results!</li>
                  <li>âœ… Users can close each independently (not annoying)</li>
                </ul>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Complete HTML Code (Top + Bottom Bars)</label>
                <div class="relative">
                  <textarea id="both-bars-code" readonly 
                    class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg text-green-400 font-mono text-xs leading-relaxed"
                    rows="8"></textarea>
                  <button onclick="copyBothBarsCode()" 
                    class="absolute top-2 right-2 px-3 py-1 bg-orange-600 hover:bg-orange-700 rounded text-xs font-semibold transition-all">
                    ğŸ“‹ Copy Both Bars
                  </button>
                </div>
              </div>
              
              <button onclick="generateBothBars()" 
                class="w-full py-3 bg-gradient-to-r from-purple-600 to-green-600 hover:from-purple-700 hover:to-green-700 rounded-lg font-bold text-lg transition-all">
                ğŸš€ Generate Both Bars (Recommended!)
              </button>
            </div>
          </div>
          
        </div>
        
        <!-- Usage Instructions -->
        <div class="mt-6 bg-blue-900 bg-opacity-20 border border-blue-700 rounded-lg p-6">
          <h3 class="text-lg font-bold mb-3 text-blue-300">ğŸ“– How to Use</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-300">
            <div>
              <p class="font-semibold mb-2">For Score Badges:</p>
              <ol class="list-decimal list-inside space-y-1 ml-2">
                <li>Set your desired score (0-100)</li>
                <li>Choose size (Small/Medium/Large)</li>
                <li>Preview updates automatically</li>
                <li>Click "ğŸ“‹ Copy" button</li>
                <li>Paste HTML into your website</li>
              </ol>
            </div>
            <div>
              <p class="font-semibold mb-2">For CTA Banners:</p>
              <ol class="list-decimal list-inside space-y-1 ml-2">
                <li>Customize headline and subheadline</li>
                <li>Set button text and link URL</li>
                <li>Preview updates in real-time</li>
                <li>Click "ğŸ“‹ Copy" button</li>
                <li>Add to your landing page or blog</li>
              </ol>
            </div>
            <div>
              <p class="font-semibold mb-2 text-orange-300">â­ For CTA Bars:</p>
              <ol class="list-decimal list-inside space-y-1 ml-2">
                <li>Customize text for each bar</li>
                <li>Click "Generate Both Bars" (recommended!)</li>
                <li>Copy complete code</li>
                <li>Paste in WordPress (footer plugin)</li>
                <li>Expected: 40-50% CTR! ğŸ”¥</li>
              </ol>
            </div>
          </div>
        </div>
      </div>

      <div id="tab-ltd-codes" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">LTD Codes</h2>
        <p class="text-gray-400">Coming soon...</p>
      </div>

      <div id="tab-settings" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">Platform Settings</h2>
        
        <div class="space-y-6">
          
          <!-- Auto-Scan Settings -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ”„ Auto-Scan Service</h3>
            <p class="text-gray-400 mb-4">Automatically scan agencies on a schedule</p>
            
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 bg-gray-700 rounded-lg">
                <div>
                  <p class="font-semibold">Auto-Scan Enabled</p>
                  <p class="text-sm text-gray-400">Scan all agencies daily at 3:00 AM</p>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="auto-scan-enabled" class="sr-only peer" onchange="toggleAutoScan()">
                  <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2">Scan Frequency</label>
                <select id="scan-frequency" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
                  <option value="daily">Daily</option>
                  <option value="weekly">Weekly</option>
                  <option value="monthly">Monthly</option>
                </select>
              </div>
              
              <button onclick="saveAutoScanSettings()" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold">
                ğŸ’¾ Save Auto-Scan Settings
              </button>
            </div>
          </div>
          
          <!-- Backup Settings -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ’¾ Backup & Export</h3>
            
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 bg-gray-700 rounded-lg">
                <div>
                  <p class="font-semibold">Last Backup</p>
                  <p class="text-sm text-gray-400" id="last-backup-time">Never</p>
                </div>
                <button onclick="createBackup()" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold">
                  Create Backup Now
                </button>
              </div>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="exportAgencies()" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold">
                  ğŸ“Š Export Agencies
                </button>
                <button onclick="exportClients()" class="p-4 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold">
                  ğŸ‘¥ Export Clients
                </button>
                <button onclick="exportScans()" class="p-4 bg-orange-600 hover:bg-orange-700 rounded-lg font-semibold">
                  ğŸ” Export Scans
                </button>
              </div>
            </div>
          </div>
          
          <!-- Platform Info -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">â„¹ï¸ Platform Information</h3>
            
            <div class="space-y-3">
              <div class="flex justify-between p-3 bg-gray-700 rounded">
                <span class="text-gray-400">Platform Version</span>
                <span class="font-semibold">2.0.0</span>
              </div>
              <div class="flex justify-between p-3 bg-gray-700 rounded">
                <span class="text-gray-400">API Version</span>
                <span class="font-semibold">v1</span>
              </div>
              <div class="flex justify-between p-3 bg-gray-700 rounded">
                <span class="text-gray-400">Database Status</span>
                <span class="text-green-400 font-semibold">âœ… Connected</span>
              </div>
              <div class="flex justify-between p-3 bg-gray-700 rounded">
                <span class="text-gray-400">Environment</span>
                <span class="font-semibold">Production</span>
              </div>
            </div>
          </div>
          
          <!-- Danger Zone -->
          <div class="bg-red-900 bg-opacity-20 border border-red-700 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4 text-red-400">âš ï¸ Danger Zone</h3>
            
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                <div>
                  <p class="font-semibold text-red-400">Clear All Cache</p>
                  <p class="text-sm text-gray-400">Remove all cached scan results</p>
                </div>
                <button onclick="clearCache()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold">
                  Clear Cache
                </button>
              </div>
              
              <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                <div>
                  <p class="font-semibold text-red-400">Reset Platform Statistics</p>
                  <p class="text-sm text-gray-400">Reset all counters and stats (WARNING: Cannot be undone!)</p>
                </div>
                <button onclick="resetStats()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold">
                  Reset Stats
                </button>
              </div>
            </div>
          </div>
          
        </div>
      </div>

      <div id="tab-handleiding" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6">ğŸ“š Handleiding - ContentScale Platform</h2>
        
        <div class="space-y-6">
          
          <!-- Quick Start -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸš€ Quick Start Guide</h3>
            <div class="space-y-3 text-gray-300">
              <p><strong>Welkom bij het ContentScale Super Admin Dashboard!</strong></p>
              <p>Dit platform geeft je volledige controle over alle agencies, clients, scans en share links.</p>
              
              <div class="mt-4 p-4 bg-blue-900 bg-opacity-30 border border-blue-700 rounded-lg">
                <p class="font-semibold mb-2">ğŸ¯ Belangrijkste functies:</p>
                <ul class="list-disc list-inside space-y-1 text-sm">
                  <li>Beheer agencies en hun toegang</li>
                  <li>Monitor alle scans en scores</li>
                  <li>CreÃ«er share links voor prospects</li>
                  <li>Beheer de global leaderboard</li>
                  <li>Genereer code voor badges en banners</li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- Overview Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ“Š Overview Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Platform-wide statistieken en quick actions.</p>
              
              <p class="mt-3"><strong>Wat zie je hier:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Total Agencies:</strong> Aantal actieve agencies in het platform</li>
                <li><strong>Total Clients:</strong> Totaal aantal clients van alle agencies</li>
                <li><strong>Total Scans:</strong> Alle uitgevoerde scans</li>
                <li><strong>Active Helpers:</strong> Aantal actieve admin/helper accounts</li>
              </ul>
              
              <p class="mt-3"><strong>Quick Actions:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li>Add Agency - Snel een nieuwe agency toevoegen</li>
                <li>Add Helper - Nieuwe admin/helper account aanmaken</li>
                <li>Create Share Link - Share link voor prospects</li>
                <li>Scan Leads - Leaderboard scanning starten</li>
              </ul>
            </div>
          </div>
          
          <!-- Admins Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ‘¥ Admins Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Beheer van admin en helper accounts.</p>
              
              <p class="mt-3"><strong>Rollen:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Super Admin:</strong> Volledige toegang tot alles (jij!)</li>
                <li><strong>Helper:</strong> Beperkte toegang, kan data bekijken en basis taken uitvoeren</li>
              </ul>
              
              <p class="mt-3"><strong>Admin toevoegen:</strong></p>
              <ol class="list-decimal list-inside ml-4 space-y-1">
                <li>Klik op "â• Add Admin/Helper"</li>
                <li>Vul username (min 3 karakters)</li>
                <li>Vul wachtwoord (min 8 karakters)</li>
                <li>Selecteer role (Helper of Super Admin)</li>
                <li>Optioneel: Full Name en Email</li>
                <li>Klik "Create Admin/Helper"</li>
              </ol>
            </div>
          </div>
          
          <!-- Agencies Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ¢ Agencies Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Beheer van alle SEO agencies in het platform.</p>
              
              <p class="mt-3"><strong>Agency toevoegen:</strong></p>
              <ol class="list-decimal list-inside ml-4 space-y-1">
                <li>Klik op "â• Add Agency"</li>
                <li>Vul agency naam in</li>
                <li>Vul domain in (bijv. example.com)</li>
                <li>Selecteer land (NL, BE, DE, UK, etc.)</li>
                <li>Selecteer plan (Free, Basic, Pro, Enterprise)</li>
                <li>Optioneel: Contact persoon en email</li>
                <li>Klik "Create Agency"</li>
              </ol>
              
              <p class="mt-3"><strong>Admin Key:</strong></p>
              <p class="ml-4">Elke agency krijgt automatisch een unieke Admin Key. Deze key gebruiken zij om in te loggen op hun agency dashboard.</p>
              
              <p class="mt-3"><strong>Kolommen uitleg:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Clients:</strong> Aantal clients van deze agency</li>
                <li><strong>Scans:</strong> Totaal aantal scans gedaan door deze agency</li>
                <li><strong>Status:</strong> Active (groen) of Inactive (rood)</li>
              </ul>
            </div>
          </div>
          
          <!-- Clients Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ‘¤ All Clients Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Overzicht van alle clients van alle agencies.</p>
              
              <p class="mt-3"><strong>Wat zie je hier:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li>Client naam en URL</li>
                <li>Bij welke agency de client hoort</li>
                <li>Aantal scans voor deze client</li>
                <li>Laatste scan datum</li>
              </ul>
              
              <p class="mt-3"><strong>Acties:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Delete:</strong> Verwijdert client EN alle bijbehorende scans (niet ongedaan te maken!)</li>
              </ul>
            </div>
          </div>
          
          <!-- Scans Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ” All Scans Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Alle uitgevoerde scans in het platform bekijken.</p>
              
              <p class="mt-3"><strong>Score Quality Levels:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong class="text-green-400">Excellent:</strong> 90-100 punten</li>
                <li><strong class="text-blue-400">Good:</strong> 80-89 punten</li>
                <li><strong class="text-yellow-400">Average:</strong> 70-79 punten</li>
                <li><strong class="text-orange-400">Below Average:</strong> 60-69 punten</li>
                <li><strong class="text-red-400">Poor:</strong> 0-59 punten</li>
              </ul>
              
              <p class="mt-3"><strong>Scan Types:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>free:</strong> Gratis scan via public interface</li>
                <li><strong>agency:</strong> Scan door een agency</li>
                <li><strong>share:</strong> Scan via share link</li>
              </ul>
            </div>
          </div>
          
          <!-- Share Links Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ”— Share Links Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> CreÃ«er unieke scan links voor prospects en klanten.</p>
              
              <p class="mt-3"><strong>Share link aanmaken:</strong></p>
              <ol class="list-decimal list-inside ml-4 space-y-1">
                <li>Klik op "â• Create Share Link"</li>
                <li>Vul client email in (verplicht)</li>
                <li>Optioneel: Client naam en bedrijfsnaam</li>
                <li>Scans Limit: Hoeveel scans mag deze link doen?</li>
                <li>Valid Days: Hoe lang is de link geldig?</li>
                <li>Klik "Create Link"</li>
                <li>URL wordt automatisch gekopieerd naar clipboard</li>
              </ol>
              
              <p class="mt-3"><strong>Status types:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong class="text-green-400">Active:</strong> Link werkt en heeft nog scans over</li>
                <li><strong class="text-orange-400">Limit Reached:</strong> Alle scans opgebruikt</li>
                <li><strong class="text-red-400">Expired:</strong> Verloopdatum bereikt</li>
                <li><strong class="text-gray-400">Inactive:</strong> Handmatig uitgeschakeld</li>
              </ul>
              
              <p class="mt-3"><strong>Acties:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>ğŸ‘ï¸ View:</strong> Open de share link in nieuw tab</li>
                <li><strong>ğŸ“‹ Copy URL:</strong> Kopieer URL naar clipboard</li>
                <li><strong>ğŸ—‘ï¸ Delete:</strong> Verwijder de share link</li>
              </ul>
            </div>
          </div>
          
          <!-- Leaderboard Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ† Leaderboard Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Beheer de public leaderboard en scan agencies.</p>
              
              <p class="mt-3"><strong>Scan Alle Agencies Nu:</strong></p>
              <p class="ml-4">Deze knop scant alle actieve agencies en voegt ze toe aan de leaderboard. Dit proces kan 1-2 minuten duren per agency.</p>
              
              <p class="mt-3"><strong>Search functie:</strong></p>
              <p class="ml-4">Zoek entries op URL, bedrijfsnaam of score. Typ je zoekterm en klik "Search".</p>
              
              <p class="mt-3"><strong>Rank badges:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li>ğŸ¥‡ - Rank #1 (hoogste score)</li>
                <li>ğŸ¥ˆ - Rank #2</li>
                <li>ğŸ¥‰ - Rank #3</li>
              </ul>
              
              <p class="mt-3"><strong>Entry verwijderen:</strong></p>
              <p class="ml-4">Klik ğŸ—‘ï¸ Delete om een entry uit de leaderboard te verwijderen. Alle ranks worden automatisch opnieuw berekend.</p>
            </div>
          </div>
          
          <!-- Code Generators Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ¨ Code Generators Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Genereer HTML code voor badges en banners.</p>
              
              <p class="mt-3"><strong>Score Badge Generator:</strong></p>
              <ol class="list-decimal list-inside ml-4 space-y-1">
                <li>Vul de gewenste score in (0-100)</li>
                <li>Selecteer size (Small, Medium, Large)</li>
                <li>Bekijk live preview</li>
                <li>Klik "ğŸ“‹ Copy HTML Code"</li>
                <li>Plak code in je website</li>
              </ol>
              
              <p class="mt-3"><strong>Banner Generator:</strong></p>
              <ol class="list-decimal list-inside ml-4 space-y-1">
                <li>Vul headline in</li>
                <li>Vul button text in</li>
                <li>Vul link URL in</li>
                <li>Bekijk live preview</li>
                <li>Klik "ğŸ“‹ Copy HTML Code"</li>
                <li>Plak code in je website</li>
              </ol>
            </div>
          </div>
          
          <!-- Settings Tab -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">âš™ï¸ Settings Tab</h3>
            <div class="space-y-2 text-gray-300">
              <p><strong>Doel:</strong> Platform-wide instellingen en beheer.</p>
              
              <p class="mt-3"><strong>Auto-Scan Service:</strong></p>
              <p class="ml-4">Schakel automatische scanning van agencies in/uit. Je kunt kiezen tussen daily, weekly of monthly scans.</p>
              
              <p class="mt-3"><strong>Backup & Export:</strong></p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Create Backup:</strong> Maak backup van hele database</li>
                <li><strong>Export Agencies:</strong> Download CSV van alle agencies</li>
                <li><strong>Export Clients:</strong> Download CSV van alle clients</li>
                <li><strong>Export Scans:</strong> Download CSV van alle scans</li>
              </ul>
              
              <p class="mt-3"><strong>âš ï¸ Danger Zone:</strong></p>
              <p class="ml-4 text-red-400">Wees voorzichtig met deze acties - ze kunnen niet ongedaan gemaakt worden!</p>
              <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Clear Cache:</strong> Verwijdert alle cached scan resultaten</li>
                <li><strong>Reset Stats:</strong> Reset alle counters (gebruik alleen bij setup!)</li>
              </ul>
            </div>
          </div>
          
          <!-- Support -->
          <div class="bg-gradient-to-r from-blue-900 to-purple-900 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4">ğŸ’¬ Support & Contact</h3>
            <div class="space-y-3 text-gray-200">
              <p><strong>Hulp nodig?</strong></p>
              <p>Als je vragen hebt of problemen tegenkomt, neem dan contact op:</p>
              
              <div class="mt-4 space-y-2">
                <p>ğŸ“§ Email: support@contentscale.com</p>
                <p>ğŸ’¬ WhatsApp: [Your WhatsApp Number]</p>
                <p>ğŸŒ Website: https://contentscale.com</p>
              </div>
              
              <div class="mt-4 p-4 bg-black bg-opacity-30 rounded-lg">
                <p class="text-sm"><strong>âš¡ Pro Tip:</strong> Gebruik de search functie in de Leaderboard tab om snel specifieke entries te vinden!</p>
              </div>
            </div>
          </div>
          
        </div>
      </div>

    </main>
  </div>

  <!-- Add Agency Modal -->
  <div id="modal-add-agency" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold">Add New Agency</h3>
        <button onclick="closeModal('modal-add-agency')" class="text-gray-400 hover:text-white text-2xl">&times;</button>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-2">Agency Name *</label>
          <input type="text" id="agency-name" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Domain *</label>
          <input type="text" id="agency-domain" placeholder="example.com" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Country *</label>
          <select id="agency-country" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
            <option value="NL">Netherlands</option>
            <option value="BE">Belgium</option>
            <option value="DE">Germany</option>
            <option value="UK">United Kingdom</option>
            <option value="US">United States</option>
            <option value="OTHER">Other</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Plan *</label>
          <select id="agency-plan" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
            <option value="free">Free</option>
            <option value="basic">Basic</option>
            <option value="pro">Pro</option>
            <option value="enterprise">Enterprise</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Contact Person</label>
          <input type="text" id="agency-contact-person" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Contact Email</label>
          <input type="email" id="agency-contact-email" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div class="flex gap-4 mt-6">
          <button onclick="submitAddAgency()" class="flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold">
            Create Agency
          </button>
          <button onclick="closeModal('modal-add-agency')" class="flex-1 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Share Link Modal -->
  <div id="modal-create-share-link" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold">Create Share Link</h3>
        <button onclick="closeModal('modal-create-share-link')" class="text-gray-400 hover:text-white text-2xl">&times;</button>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-2">Client Email *</label>
          <input type="email" id="share-client-email" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Client Name</label>
          <input type="text" id="share-client-name" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Company</label>
          <input type="text" id="share-client-company" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Scans Limit *</label>
          <input type="number" id="share-scans-limit" value="5" min="1" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Valid For (Days) *</label>
          <input type="number" id="share-valid-days" value="30" min="1" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div class="flex gap-4 mt-6">
          <button onclick="submitCreateShareLink()" class="flex-1 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold">
            Create Link
          </button>
          <button onclick="closeModal('modal-create-share-link')" class="flex-1 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Admin/Helper Modal -->
  <div id="modal-add-admin" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold">Add Admin/Helper</h3>
        <button onclick="closeModal('modal-add-admin')" class="text-gray-400 hover:text-white text-2xl">&times;</button>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-2">Username *</label>
          <input type="text" id="admin-username" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Password *</label>
          <input type="password" id="admin-password" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
          <p class="text-xs text-gray-400 mt-1">Minimum 8 characters</p>
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Role *</label>
          <select id="admin-role" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
            <option value="helper">Helper (Limited Access)</option>
            <option value="super_admin">Super Admin (Full Access)</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Full Name</label>
          <input type="text" id="admin-full-name" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Email</label>
          <input type="email" id="admin-email" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
        </div>

        <div class="bg-blue-900 border border-blue-700 rounded-lg p-4 mt-4">
          <p class="text-sm text-blue-200">
            <strong>Helper Role:</strong> Can view data and perform basic tasks<br>
            <strong>Super Admin Role:</strong> Full platform control including user management
          </p>
        </div>

        <div class="flex gap-4 mt-6">
          <button onclick="submitAddAdmin()" class="flex-1 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold">
            Create Admin/Helper
          </button>
          <button onclick="closeModal('modal-add-admin')" class="flex-1 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ==========================================
    // AUTHENTICATION
    // ==========================================
    async function login() {
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
      const errorDiv = document.getElementById('login-error');
      
      if (!username || !password) {
        errorDiv.textContent = 'Please enter username and password';
        errorDiv.classList.remove('hidden');
        return;
      }
      
      try {
        const response = await fetch('/api/setup/verify-admin', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        });
        
        const data = await response.json();
        
        if (data.success) {
          localStorage.setItem('admin_id', data.admin_id);
          sessionStorage.setItem('superadmin_logged_in', 'true');
          sessionStorage.setItem('superadmin_username', data.admin.username);
          
          document.getElementById('login-screen').classList.add('hidden');
          document.getElementById('main-dashboard').classList.remove('hidden');
          document.getElementById('admin-username').textContent = data.admin.username;
          
          loadOverview();
        } else {
          errorDiv.textContent = data.error || 'Login failed';
          errorDiv.classList.remove('hidden');
        }
      } catch (error) {
        console.error('Login error:', error);
        errorDiv.textContent = 'Connection error';
        errorDiv.classList.remove('hidden');
      }
    }

    function logout() {
      localStorage.removeItem('admin_id');
      sessionStorage.removeItem('superadmin_logged_in');
      sessionStorage.removeItem('superadmin_username');
      location.reload();
    }

    // Check login on page load
    if (sessionStorage.getItem('superadmin_logged_in') === 'true') {
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('main-dashboard').classList.remove('hidden');
      document.getElementById('admin-username').textContent = sessionStorage.getItem('superadmin_username');
      loadOverview();
    }

    // ==========================================
    // TAB SWITCHING
    // ==========================================
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.add('hidden');
      });
      
      // Remove active class from all buttons
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(`tab-${tabName}`).classList.remove('hidden');
      
      // Add active class to clicked button
      event.target.classList.add('active');
      
      // Load data for specific tabs
      if (tabName === 'overview') loadOverview();
      if (tabName === 'admins') loadAdmins();
      if (tabName === 'agencies') loadAgencies();
      if (tabName === 'clients') loadClients();
      if (tabName === 'scans') loadScans();
      if (tabName === 'share-links') loadShareLinks();
      if (tabName === 'leaderboard') loadLeaderboard();
      if (tabName === 'code-generators') {
        // Initialize CTA generators when tab opens
        setTimeout(function() {
          if (document.getElementById('top-banner-headline')) {
            generateTopBanner();
            generateBottomBar();
            generateBothBars();
          }
        }, 100);
      }
    }

    // ==========================================
    // ADMINS TAB
    // ==========================================
    async function loadAdmins() {
      document.getElementById('admins-loading').classList.remove('hidden');
      document.getElementById('admins-list').classList.add('hidden');
      
      try {
        const response = await fetch('/api/admins', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        if (!response.ok) throw new Error('Failed to load admins');
        
        const data = await response.json();
        
        if (data.success) {
          const tbody = document.getElementById('admins-tbody');
          tbody.innerHTML = '';
          
          data.admins.forEach(admin => {
            const roleColors = {
              'super_admin': 'bg-purple-600',
              'helper': 'bg-blue-600',
              'admin': 'bg-green-600'
            };
            
            const roleColor = roleColors[admin.role] || 'bg-gray-600';
            
            const row = `
              <tr>
                <td class="px-4 py-3 font-semibold">${admin.username}</td>
                <td class="px-4 py-3">${admin.full_name || '-'}</td>
                <td class="px-4 py-3 text-sm">${admin.email || '-'}</td>
                <td class="px-4 py-3">
                  <span class="px-2 py-1 ${roleColor} rounded text-xs font-semibold">
                    ${admin.role.replace('_', ' ').toUpperCase()}
                  </span>
                </td>
                <td class="px-4 py-3">
                  ${admin.is_active 
                    ? '<span class="text-green-400">âœ… Active</span>' 
                    : '<span class="text-red-400">âŒ Inactive</span>'}
                </td>
                <td class="px-4 py-3 text-sm">${new Date(admin.created_at).toLocaleDateString()}</td>
                <td class="px-4 py-3 text-sm">${admin.last_login ? new Date(admin.last_login).toLocaleDateString() : 'Never'}</td>
                <td class="px-4 py-3">
                  <button onclick="deleteAdmin('${admin.id}')" class="text-red-400 hover:text-red-300">
                    ğŸ—‘ï¸ Delete
                  </button>
                </td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
          
          document.getElementById('admins-loading').classList.add('hidden');
          document.getElementById('admins-list').classList.remove('hidden');
        }
      } catch (error) {
        console.error('Error loading admins:', error);
        document.getElementById('admins-loading').innerHTML = '<p class="text-red-400">Error loading admins</p>';
      }
    }

    async function submitAddAdmin() {
      const formData = {
        username: document.getElementById('admin-username').value,
        password: document.getElementById('admin-password').value,
        role: document.getElementById('admin-role').value,
        full_name: document.getElementById('admin-full-name').value,
        email: document.getElementById('admin-email').value
      };
      
      // Validation
      if (!formData.username || formData.username.length < 3) {
        alert('Username must be at least 3 characters');
        return;
      }
      
      if (!formData.password || formData.password.length < 8) {
        alert('Password must be at least 8 characters');
        return;
      }
      
      if (!formData.role) {
        alert('Please select a role');
        return;
      }
      
      try {
        const response = await fetch('/api/admins', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-admin-key': localStorage.getItem('admin_id')
          },
          body: JSON.stringify(formData)
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Admin/Helper created successfully!');
          closeModal('modal-add-admin');
          
          // Clear form
          document.getElementById('admin-username').value = '';
          document.getElementById('admin-password').value = '';
          document.getElementById('admin-role').value = 'helper';
          document.getElementById('admin-full-name').value = '';
          document.getElementById('admin-email').value = '';
          
          loadAdmins();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error creating admin:', error);
        alert('Failed to create admin/helper');
      }
    }

    async function deleteAdmin(adminId) {
      if (!confirm('Are you sure you want to delete this admin/helper?')) return;
      
      try {
        const response = await fetch(`/api/admins/${adminId}`, {
          method: 'DELETE',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Admin/Helper deleted successfully!');
          loadAdmins();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error deleting admin:', error);
        alert('Failed to delete admin/helper');
      }
    }

    function showAddAdminModal() {
      document.getElementById('modal-add-admin').classList.remove('hidden');
    }

    // ==========================================
    // OVERVIEW TAB
    // ==========================================
    async function loadOverview() {
      try {
        const response = await fetch('/api/admin/stats', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          document.getElementById('stat-total-agencies').textContent = data.stats.total_agencies;
          document.getElementById('stat-total-clients').textContent = data.stats.total_clients;
          document.getElementById('stat-total-scans').textContent = data.stats.total_scans;
          document.getElementById('stat-active-helpers').textContent = data.stats.active_helpers;
        }
      } catch (error) {
        console.error('Error loading overview:', error);
      }
    }

    // ==========================================
    // AGENCIES TAB
    // ==========================================
    async function loadAgencies() {
      document.getElementById('agencies-loading').classList.remove('hidden');
      document.getElementById('agencies-list').classList.add('hidden');
      
      try {
        const response = await fetch('/api/super-admin/agencies', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        if (!response.ok) throw new Error('Failed to load agencies');
        
        const data = await response.json();
        
        if (data.success) {
          const tbody = document.getElementById('agencies-tbody');
          tbody.innerHTML = '';
          
          data.agencies.forEach(agency => {
            const row = `
              <tr>
                <td class="px-4 py-3">${agency.name}</td>
                <td class="px-4 py-3">${agency.domain}</td>
                <td class="px-4 py-3">${agency.country}</td>
                <td class="px-4 py-3"><span class="px-2 py-1 bg-blue-600 rounded text-xs">${agency.plan}</span></td>
                <td class="px-4 py-3">${agency.client_count || 0}</td>
                <td class="px-4 py-3">${agency.total_scans || 0}</td>
                <td class="px-4 py-3">
                  ${agency.is_active ? '<span class="text-green-400">âœ… Active</span>' : '<span class="text-red-400">âŒ Inactive</span>'}
                </td>
                <td class="px-4 py-3">
                  <button onclick="deleteAgency(${agency.id})" class="text-red-400 hover:text-red-300">ğŸ—‘ï¸ Delete</button>
                </td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
          
          document.getElementById('agencies-loading').classList.add('hidden');
          document.getElementById('agencies-list').classList.remove('hidden');
        }
      } catch (error) {
        console.error('Error loading agencies:', error);
        document.getElementById('agencies-loading').innerHTML = '<p class="text-red-400">Error loading agencies</p>';
      }
    }

    async function submitAddAgency() {
      const formData = {
        name: document.getElementById('agency-name').value,
        domain: document.getElementById('agency-domain').value,
        country: document.getElementById('agency-country').value,
        plan: document.getElementById('agency-plan').value,
        contact_person: document.getElementById('agency-contact-person').value,
        contact_email: document.getElementById('agency-contact-email').value
      };
      
      try {
        const response = await fetch('/api/agencies', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-admin-key': localStorage.getItem('admin_id')
          },
          body: JSON.stringify(formData)
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Agency created successfully!');
          closeModal('modal-add-agency');
          loadAgencies();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error creating agency:', error);
        alert('Failed to create agency');
      }
    }

    async function deleteAgency(id) {
      if (!confirm('Are you sure you want to delete this agency?')) return;
      
      try {
        const response = await fetch(`/api/agencies/${id}`, {
          method: 'DELETE',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Agency deleted successfully!');
          loadAgencies();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error deleting agency:', error);
        alert('Failed to delete agency');
      }
    }

    // ==========================================
    // CLIENTS TAB
    // ==========================================
    async function loadClients() {
      document.getElementById('clients-loading').classList.remove('hidden');
      document.getElementById('clients-list').classList.add('hidden');
      
      try {
        const response = await fetch('/api/admin/clients', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          const tbody = document.getElementById('clients-tbody');
          tbody.innerHTML = '';
          
          data.clients.forEach(client => {
            const row = `
              <tr>
                <td class="px-4 py-3 text-blue-400">${client.url}</td>
                <td class="px-4 py-3">${client.agency_name || '-'}</td>
                <td class="px-4 py-3">${client.scan_count || 0}</td>
                <td class="px-4 py-3">${client.last_scan_at ? new Date(client.last_scan_at).toLocaleDateString() : 'Never'}</td>
                <td class="px-4 py-3">
                  <button onclick="deleteClient(${client.id})" class="text-red-400 hover:text-red-300">ğŸ—‘ï¸ Delete</button>
                </td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
          
          document.getElementById('clients-loading').classList.add('hidden');
          document.getElementById('clients-list').classList.remove('hidden');
        }
      } catch (error) {
        console.error('Error loading clients:', error);
        document.getElementById('clients-loading').innerHTML = '<p class="text-red-400">Error loading clients</p>';
      }
    }

    async function deleteClient(id) {
      if (!confirm('Delete this client and all associated scans?')) return;
      
      try {
        const response = await fetch(`/api/admin/clients/${id}`, {
          method: 'DELETE',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Client deleted successfully!');
          loadClients();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Failed to delete client');
      }
    }

    // ==========================================
    // SCANS TAB
    // ==========================================
    async function loadScans() {
      document.getElementById('scans-loading').classList.remove('hidden');
      document.getElementById('scans-list').classList.add('hidden');
      
      try {
        const response = await fetch('/api/admin/scans', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          const tbody = document.getElementById('scans-tbody');
          tbody.innerHTML = '';
          
          data.scans.forEach(scan => {
            const qualityColors = {
              excellent: 'text-green-400',
              good: 'text-blue-400',
              average: 'text-yellow-400',
              'below-average': 'text-orange-400',
              poor: 'text-red-400'
            };
            
            const displayClient = scan.agency_name || (scan.client_url ? scan.client_url.substring(0, 30) + '...' : '-');
            
            const row = `
              <tr>
                <td class="px-4 py-3 text-blue-400 text-sm">${scan.url.substring(0, 50)}...</td>
                <td class="px-4 py-3 font-bold">${scan.score}/100</td>
                <td class="px-4 py-3 ${qualityColors[scan.quality] || 'text-gray-400'}">${scan.quality}</td>
                <td class="px-4 py-3 text-sm">${displayClient}</td>
                <td class="px-4 py-3"><span class="px-2 py-1 bg-gray-700 rounded text-xs">${scan.scan_type}</span></td>
                <td class="px-4 py-3 text-sm">${new Date(scan.created_at).toLocaleDateString()}</td>
                <td class="px-4 py-3">
                  <button onclick="deleteScan(${scan.id})" class="text-red-400 hover:text-red-300">ğŸ—‘ï¸</button>
                </td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
          
          document.getElementById('scans-loading').classList.add('hidden');
          document.getElementById('scans-list').classList.remove('hidden');
        }
      } catch (error) {
        console.error('Error loading scans:', error);
        document.getElementById('scans-loading').innerHTML = '<p class="text-red-400">Error loading scans</p>';
      }
    }

    async function deleteScan(id) {
      if (!confirm('Delete this scan?')) return;
      
      try {
        const response = await fetch(`/api/admin/scans/${id}`, {
          method: 'DELETE',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          loadScans();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Failed to delete scan');
      }
    }

    // ==========================================
    // SHARE LINKS TAB
    // ==========================================
    async function loadShareLinks() {
      document.getElementById('share-links-loading').classList.remove('hidden');
      document.getElementById('share-links-list').classList.add('hidden');
      
      try {
        const response = await fetch('/api/admin/share-links', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          const tbody = document.getElementById('share-links-tbody');
          tbody.innerHTML = '';
          
          data.share_links.forEach(link => {
            const statusColors = {
              active: 'text-green-400',
              expired: 'text-red-400',
              limit_reached: 'text-orange-400',
              inactive: 'text-gray-400'
            };
            
            const shareUrl = `${window.location.origin}/scan-with-link/${link.share_code}`;
            
            const row = `
              <tr>
                <td class="px-4 py-3">${link.client_name || '-'}</td>
                <td class="px-4 py-3 text-sm">${link.client_email}</td>
                <td class="px-4 py-3">${link.scans_used}/${link.scans_limit}</td>
                <td class="px-4 py-3 text-sm">${new Date(link.expires_at).toLocaleDateString()}</td>
                <td class="px-4 py-3 ${statusColors[link.status]}">${link.status}</td>
                <td class="px-4 py-3 space-x-2">
                  <button onclick="window.open('${shareUrl}', '_blank')" class="text-blue-400 hover:text-blue-300" title="View">ğŸ‘ï¸</button>
                  <button onclick="copyShareUrl('${shareUrl}')" class="text-green-400 hover:text-green-300" title="Copy URL">ğŸ“‹</button>
                  <button onclick="deleteShareLink('${link.share_code}')" class="text-red-400 hover:text-red-300" title="Delete">ğŸ—‘ï¸</button>
                </td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
          
          document.getElementById('share-links-loading').classList.add('hidden');
          document.getElementById('share-links-list').classList.remove('hidden');
        }
      } catch (error) {
        console.error('Error loading share links:', error);
        document.getElementById('share-links-loading').innerHTML = '<p class="text-red-400">Error loading share links</p>';
      }
    }

    async function submitCreateShareLink() {
      const formData = {
        client_email: document.getElementById('share-client-email').value,
        client_name: document.getElementById('share-client-name').value,
        client_company: document.getElementById('share-client-company').value,
        scans_limit: parseInt(document.getElementById('share-scans-limit').value),
        valid_days: parseInt(document.getElementById('share-valid-days').value)
      };
      
      try {
        const response = await fetch('/api/admin/share-links/create', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-admin-key': localStorage.getItem('admin_id')
          },
          body: JSON.stringify(formData)
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Share link created! URL copied to clipboard.');
          navigator.clipboard.writeText(data.share_url);
          closeModal('modal-create-share-link');
          loadShareLinks();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error creating share link:', error);
        alert('Failed to create share link');
      }
    }

    function copyShareUrl(url) {
      navigator.clipboard.writeText(url);
      alert('URL copied to clipboard!');
    }

    async function deleteShareLink(code) {
      if (!confirm('Delete this share link?')) return;
      
      try {
        const response = await fetch(`/api/admin/share-links/${code}`, {
          method: 'DELETE',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Share link deleted!');
          loadShareLinks();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Failed to delete share link');
      }
    }

    // ==========================================
    // LEADERBOARD TAB
    // ==========================================
    async function loadLeaderboard() {
      try {
        const response = await fetch('/api/admin/leaderboard', {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          displayLeaderboardResults(data.entries);
        }
      } catch (error) {
        console.error('Error loading leaderboard:', error);
      }
    }

    async function searchLeaderboard() {
      const query = document.getElementById('leaderboard-search').value;
      
      if (!query) {
        loadLeaderboard();
        return;
      }
      
      try {
        const response = await fetch(`/api/admin/leaderboard/search?q=${encodeURIComponent(query)}`, {
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          displayLeaderboardResults(data.entries);
        }
      } catch (error) {
        console.error('Error searching leaderboard:', error);
      }
    }

    function displayLeaderboardResults(entries) {
      const tbody = document.getElementById('leaderboard-tbody');
      tbody.innerHTML = '';
      
      entries.forEach(entry => {
        const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
        const medal = entry.rank <= 3 ? medals[entry.rank - 1] : '';
        
        const row = `
          <tr>
            <td class="px-4 py-3 font-bold">${medal} #${entry.rank}</td>
            <td class="px-4 py-3">${entry.company_name || '-'}</td>
            <td class="px-4 py-3 text-blue-400 text-sm">${entry.url.substring(0, 50)}...</td>
            <td class="px-4 py-3 font-bold">${entry.score}/100</td>
            <td class="px-4 py-3">${entry.country}</td>
            <td class="px-4 py-3">
              <button onclick="deleteLeaderboardEntry(${entry.id})" class="text-red-400 hover:text-red-300">ğŸ—‘ï¸ Delete</button>
            </td>
          </tr>
        `;
        tbody.innerHTML += row;
      });
    }

    async function deleteLeaderboardEntry(id) {
      if (!confirm('Delete this leaderboard entry?')) return;
      
      try {
        const response = await fetch(`/api/admin/leaderboard/${id}`, {
          method: 'DELETE',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert('Entry deleted!');
          loadLeaderboard();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Failed to delete entry');
      }
    }

    async function scanAllAgencies() {
      if (!confirm('This will scan all agencies and add them to the leaderboard. Continue?')) return;
      
      alert('Scanning started! This may take a few minutes...');
      
      try {
        const response = await fetch('/api/admin/scan-all-agencies', {
          method: 'POST',
          headers: { 'x-admin-key': localStorage.getItem('admin_id') }
        });
        
        const data = await response.json();
        
        if (data.success) {
          alert(`Scan complete!\nSuccess: ${data.successCount}\nFailed: ${data.failCount}`);
          loadLeaderboard();
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Scan failed');
      }
    }

    // ==========================================
    // MODAL HELPERS
    // ==========================================
    function showAddAgencyModal() {
      document.getElementById('modal-add-agency').classList.remove('hidden');
    }

    function showCreateShareLinkModal() {
      document.getElementById('modal-create-share-link').classList.remove('hidden');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.add('hidden');
    }

    // ==========================================
    // CODE GENERATORS TAB - PROFESSIONAL VERSION
    // ==========================================
    function generateCircularBadge() {
      const score = parseInt(document.getElementById('badge-score').value) || 0;
      const size = parseInt(document.getElementById('badge-size').value) || 180;
      
      // Determine quality and color based on score
      let quality, gradient, textColor, ringColor;
      
      if (score >= 90) {
        quality = 'EXCELLENT';
        gradient = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
        textColor = '#ffffff';
        ringColor = '#10b981';
      } else if (score >= 80) {
        quality = 'GOOD';
        gradient = 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)';
        textColor = '#ffffff';
        ringColor = '#3b82f6';
      } else if (score >= 70) {
        quality = 'AVERAGE';
        gradient = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
        textColor = '#ffffff';
        ringColor = '#f59e0b';
      } else if (score >= 60) {
        quality = 'BELOW AVERAGE';
        gradient = 'linear-gradient(135deg, #f97316 0%, #ea580c 100%)';
        textColor = '#ffffff';
        ringColor = '#f97316';
      } else {
        quality = 'POOR';
        gradient = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
        textColor = '#ffffff';
        ringColor = '#ef4444';
      }
      
      const badgeHTML = `<div style="display: inline-flex; flex-direction: column; align-items: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- Circular Badge -->
  <div style="position: relative; width: ${size}px; height: ${size}px;">
    <!-- Outer Ring -->
    <div style="position: absolute; inset: 0; border-radius: 50%; background: ${gradient}; padding: 6px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
      <!-- Inner Circle -->
      <div style="width: 100%; height: 100%; border-radius: 50%; background: white; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);">
        <!-- Score -->
        <div style="font-size: ${size * 0.35}px; font-weight: 800; background: ${gradient}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; line-height: 1;">
          ${score}
        </div>
        <!-- /100 Text -->
        <div style="font-size: ${size * 0.12}px; color: #6b7280; font-weight: 600; margin-top: ${size * 0.04}px;">
          /100
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quality Label -->
  <div style="margin-top: ${size * 0.15}px; padding: ${size * 0.04}px ${size * 0.12}px; background: ${gradient}; color: ${textColor}; font-size: ${size * 0.09}px; font-weight: 700; border-radius: ${size * 0.08}px; letter-spacing: 0.5px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
    ${quality}
  </div>
  
  <!-- ContentScale Branding -->
  <div style="margin-top: ${size * 0.08}px; font-size: ${size * 0.07}px; color: #9ca3af; font-weight: 500;">
    ContentScale Score
  </div>
</div>`;
      
      document.getElementById('badge-preview').innerHTML = badgeHTML;
      document.getElementById('badge-code').value = badgeHTML;
    }
    
    function copyBadgeCode() {
      const code = document.getElementById('badge-code').value;
      navigator.clipboard.writeText(code);
      
      // Visual feedback
      const btn = event.target;
      const originalText = btn.textContent;
      btn.textContent = 'âœ… Copied!';
      btn.classList.add('bg-green-600');
      btn.classList.remove('bg-blue-600');
      
      setTimeout(() => {
        btn.textContent = originalText;
        btn.classList.remove('bg-green-600');
        btn.classList.add('bg-blue-600');
      }, 2000);
    }
    
    function generateBanner() {
      const headline = document.getElementById('banner-headline').value;
      const subheadline = document.getElementById('banner-subheadline').value;
      const buttonText = document.getElementById('banner-button').value;
      const url = document.getElementById('banner-url').value;
      
      const bannerHTML = `<div style="max-width: 700px; margin: 0 auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- Content Container -->
  <div style="text-align: center; color: white;">
    <!-- Icon/Emoji -->
    <div style="font-size: 48px; margin-bottom: 20px;">
      ğŸ¯
    </div>
    
    <!-- Headline -->
    <h2 style="margin: 0 0 12px 0; font-size: 32px; font-weight: 800; line-height: 1.2; letter-spacing: -0.5px;">
      ${headline}
    </h2>
    
    <!-- Subheadline -->
    <p style="margin: 0 0 30px 0; font-size: 18px; opacity: 0.95; line-height: 1.5; max-width: 500px; margin-left: auto; margin-right: auto;">
      ${subheadline}
    </p>
    
    <!-- CTA Button -->
    <a href="${url}" style="display: inline-block; padding: 16px 48px; background: white; color: #667eea; text-decoration: none; border-radius: 50px; font-weight: 700; font-size: 18px; box-shadow: 0 8px 24px rgba(0,0,0,0.2); transition: all 0.3s ease; border: 3px solid white;">
      ${buttonText} â†’
    </a>
    
    <!-- Trust Badge -->
    <div style="margin-top: 24px; font-size: 14px; opacity: 0.8;">
      âœ“ No credit card required â€¢ âœ“ Instant results â€¢ âœ“ 100% free
    </div>
  </div>
</div>`;
      
      document.getElementById('banner-preview').innerHTML = bannerHTML;
      document.getElementById('banner-code').value = bannerHTML;
    }
    
    function copyBannerCode() {
      const code = document.getElementById('banner-code').value;
      navigator.clipboard.writeText(code);
      
      // Visual feedback
      const btn = event.target;
      const originalText = btn.textContent;
      btn.textContent = 'âœ… Copied!';
      btn.classList.add('bg-green-600');
      btn.classList.remove('bg-purple-600');
      
      setTimeout(() => {
        btn.textContent = originalText;
        btn.classList.remove('bg-green-600');
        btn.classList.add('bg-purple-600');
      }, 2000);
    }

    // ==========================================
    // CTA BAR GENERATORS - NEW!
    // ==========================================
    function generateTopBanner() {
      const headline = document.getElementById('top-banner-headline')?.value || 'Free ContentScore Scanner!';
      const sub = document.getElementById('top-banner-sub')?.value || 'Get your score in 30 seconds';
      const btn = document.getElementById('top-banner-btn')?.value || 'Try Free Scanner â†’';
      const link = document.getElementById('top-banner-link')?.value || 'https://app.contentscale.site/#scanner';
      
      const code = `<!-- TOP BANNER CTA -->
<div id="cs-top-banner" class="cs-top-banner">
  <div class="cs-top-content">
    <div class="cs-top-text">
      <span class="cs-top-icon">ğŸ¯</span>
      <span class="cs-top-msg">
        <strong>${headline}</strong>
        <span class="cs-top-sub">${sub}</span>
      </span>
    </div>
    <a href="${link}" class="cs-top-btn" target="_blank" rel="noopener">
      ${btn}
    </a>
    <button class="cs-top-close" onclick="csCloseTop()" aria-label="Close">Ã—</button>
  </div>
</div>

<style>
.cs-top-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-bottom: 3px solid #a78bfa;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  z-index: 999999;
  animation: csSlideDownTop 0.6s ease-out;
  padding: 0;
  display: none;
}
.cs-top-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  gap: 20px;
}
.cs-top-text {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}
.cs-top-icon {
  font-size: 28px;
  animation: csPulseTop 2s infinite;
}
.cs-top-msg {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.cs-top-msg strong {
  color: #ffffff;
  font-size: 16px;
  font-weight: 700;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}
.cs-top-sub {
  color: rgba(255, 255, 255, 0.85);
  font-size: 13px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}
.cs-top-btn {
  background: white;
  color: #667eea !important;
  padding: 10px 28px;
  border-radius: 50px;
  font-weight: bold;
  font-size: 15px;
  text-decoration: none !important;
  white-space: nowrap;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}
.cs-top-btn:hover {
  background: #f9fafb;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  color: #667eea !important;
  text-decoration: none !important;
}
.cs-top-close {
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: all 0.2s ease;
}
.cs-top-close:hover {
  background: rgba(255, 255, 255, 0.15);
  color: white;
}
@keyframes csSlideDownTop {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes csPulseTop {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}
@media (max-width: 768px) {
  .cs-top-content {
    flex-direction: column;
    padding: 10px 16px;
    gap: 10px;
    text-align: center;
  }
  .cs-top-text {
    flex-direction: column;
    text-align: center;
  }
  .cs-top-msg strong {
    font-size: 15px;
  }
  .cs-top-sub {
    font-size: 12px;
  }
  .cs-top-btn {
    width: 100%;
    padding: 10px 20px;
    font-size: 14px;
  }
  .cs-top-close {
    position: absolute;
    top: 6px;
    right: 6px;
  }
}
.cs-top-banner.cs-hidden {
  display: none !important;
}
body.cs-top-active {
  padding-top: 70px !important;
}
@media (max-width: 768px) {
  body.cs-top-active {
    padding-top: 90px !important;
  }
}
</style>

<script>
(function() {
  window.csCloseTop = function() {
    document.getElementById('cs-top-banner').classList.add('cs-hidden');
    document.body.classList.remove('cs-top-active');
    localStorage.setItem('cs_top_closed', 'true');
  };
  
  window.addEventListener('load', function() {
    const wasClosed = localStorage.getItem('cs_top_closed');
    if (!wasClosed) {
      setTimeout(function() {
        var banner = document.getElementById('cs-top-banner');
        if (banner) {
          banner.style.display = 'block';
          document.body.classList.add('cs-top-active');
        }
      }, 1000);
    }
  });
  
  setTimeout(function() {
    var btn = document.querySelector('.cs-top-btn');
    if (btn) {
      btn.addEventListener('click', function() {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'click', {
            'event_category': 'CTA',
            'event_label': 'Top Banner to Scanner'
          });
        }
      });
    }
  }, 1000);
})();
</script>`;

      if (document.getElementById('top-banner-code')) {
        document.getElementById('top-banner-code').value = code;
      }
    }

    function generateBottomBar() {
      const headline = document.getElementById('bottom-bar-headline')?.value || 'Try Our Free ContentScore Scanner!';
      const sub = document.getElementById('bottom-bar-sub')?.value || 'Get your score in 30 seconds - No signup required';
      const btn = document.getElementById('bottom-bar-btn')?.value || 'Scan Your Site Free â†’';
      const link = document.getElementById('bottom-bar-link')?.value || 'https://app.contentscale.site/#scanner';
      
      const code = `<!-- BOTTOM STICKY BAR -->
<div id="cs-bottom-bar" class="cs-bottom-sticky">
  <div class="cs-bottom-content">
    <div class="cs-bottom-text">
      <span class="cs-bottom-icon">ğŸš€</span>
      <span class="cs-bottom-msg">
        <strong>${headline}</strong>
        <span class="cs-bottom-sub">${sub}</span>
      </span>
    </div>
    <a href="${link}" class="cs-bottom-btn" target="_blank" rel="noopener">
      ${btn}
    </a>
    <button class="cs-bottom-close" onclick="csCloseBottom()" aria-label="Close">Ã—</button>
  </div>
</div>

<style>
.cs-bottom-sticky {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-top: 3px solid #16a34a;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
  z-index: 999998;
  animation: csSlideUpBottom 0.6s ease-out;
  padding: 0;
  display: none;
}
.cs-bottom-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  gap: 20px;
}
.cs-bottom-text {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}
.cs-bottom-icon {
  font-size: 32px;
  animation: csBounceBottom 2s infinite;
}
.cs-bottom-msg {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.cs-bottom-msg strong {
  color: #ffffff;
  font-size: 18px;
  font-weight: 700;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}
.cs-bottom-sub {
  color: #94a3b8;
  font-size: 14px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}
.cs-bottom-btn {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
  color: white !important;
  padding: 14px 32px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 16px;
  text-decoration: none !important;
  white-space: nowrap;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}
.cs-bottom-btn:hover {
  background: linear-gradient(135deg, #15803d 0%, #14532d 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(22, 163, 74, 0.5);
  color: white !important;
  text-decoration: none !important;
}
.cs-bottom-close {
  background: transparent;
  border: none;
  color: #94a3b8;
  font-size: 28px;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: all 0.2s ease;
}
.cs-bottom-close:hover {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}
@keyframes csSlideUpBottom {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes csBounceBottom {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}
@media (max-width: 768px) {
  .cs-bottom-content {
    flex-direction: column;
    padding: 12px 16px;
    gap: 12px;
    text-align: center;
  }
  .cs-bottom-text {
    flex-direction: column;
    text-align: center;
  }
  .cs-bottom-msg strong {
    font-size: 16px;
  }
  .cs-bottom-sub {
    font-size: 12px;
  }
  .cs-bottom-btn {
    width: 100%;
    padding: 12px 24px;
    font-size: 15px;
  }
  .cs-bottom-close {
    position: absolute;
    top: 8px;
    right: 8px;
  }
}
.cs-bottom-sticky.cs-hidden {
  display: none !important;
}
</style>

<script>
(function() {
  window.csCloseBottom = function() {
    document.getElementById('cs-bottom-bar').classList.add('cs-hidden');
    localStorage.setItem('cs_bottom_closed', 'true');
  };
  
  window.addEventListener('load', function() {
    const wasClosed = localStorage.getItem('cs_bottom_closed');
    if (!wasClosed) {
      setTimeout(function() {
        var bar = document.getElementById('cs-bottom-bar');
        if (bar) bar.style.display = 'block';
      }, 3000);
    }
  });
  
  setTimeout(function() {
    var btn = document.querySelector('.cs-bottom-btn');
    if (btn) {
      btn.addEventListener('click', function() {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'click', {
            'event_category': 'CTA',
            'event_label': 'Bottom Bar to Scanner'
          });
        }
      });
    }
  }, 1000);
})();
</script>`;

      if (document.getElementById('bottom-bar-code')) {
        document.getElementById('bottom-bar-code').value = code;
      }
    }

    function generateBothBars() {
      generateTopBanner();
      generateBottomBar();
      
      const topCode = document.getElementById('top-banner-code')?.value || '';
      const bottomCode = document.getElementById('bottom-bar-code')?.value || '';
      
      const combinedCode = topCode + '\n\n' + bottomCode;
      
      if (document.getElementById('both-bars-code')) {
        document.getElementById('both-bars-code').value = combinedCode;
      }
      
      alert('âœ… Both bars generated! Scroll down to copy the complete code.');
    }

    function copyTopBannerCode() {
      const code = document.getElementById('top-banner-code')?.value;
      if (code) {
        navigator.clipboard.writeText(code);
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'âœ… Copied!';
        btn.classList.add('bg-green-600');
        btn.classList.remove('bg-purple-600');
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('bg-green-600');
          btn.classList.add('bg-purple-600');
        }, 2000);
      }
    }

    function copyBottomBarCode() {
      const code = document.getElementById('bottom-bar-code')?.value;
      if (code) {
        navigator.clipboard.writeText(code);
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'âœ… Copied!';
        btn.classList.add('bg-blue-600');
        btn.classList.remove('bg-green-600');
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('bg-blue-600');
          btn.classList.add('bg-green-600');
        }, 2000);
      }
    }

    function copyBothBarsCode() {
      const code = document.getElementById('both-bars-code')?.value;
      if (code) {
        navigator.clipboard.writeText(code);
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'âœ… Copied Both!';
        btn.classList.add('bg-green-600');
        btn.classList.remove('bg-orange-600');
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('bg-green-600');
          btn.classList.add('bg-orange-600');
        }, 2000);
      }
    }
    
    // Initialize generators on page load
    document.addEventListener('DOMContentLoaded', function() {
      if (document.getElementById('badge-score')) {
        generateCircularBadge();
        generateBanner();
      }
    });

    // ==========================================
    // SETTINGS TAB
    // ==========================================
    function toggleAutoScan() {
      const enabled = document.getElementById('auto-scan-enabled').checked;
      console.log('Auto-scan:', enabled ? 'enabled' : 'disabled');
      // In production, this would call an API to save the setting
    }
    
    function saveAutoScanSettings() {
      const enabled = document.getElementById('auto-scan-enabled').checked;
      const frequency = document.getElementById('scan-frequency').value;
      
      alert(`Auto-scan settings saved!\nEnabled: ${enabled}\nFrequency: ${frequency}`);
      
      // In production, this would call an API:
      // await fetch('/api/admin/settings/auto-scan', {
      //   method: 'POST',
      //   headers: {
      //     'Content-Type': 'application/json',
      //     'x-admin-key': localStorage.getItem('admin_id')
      //   },
      //   body: JSON.stringify({ enabled, frequency })
      // });
    }
    
    function createBackup() {
      const now = new Date().toISOString();
      document.getElementById('last-backup-time').textContent = new Date().toLocaleString();
      alert('Backup created successfully!\n\nIn production, this would create a database backup.');
      
      // In production:
      // await fetch('/api/admin/backup/create', {
      //   method: 'POST',
      //   headers: { 'x-admin-key': localStorage.getItem('admin_id') }
      // });
    }
    
    function exportAgencies() {
      alert('Exporting agencies to CSV...\n\nIn production, this would download a CSV file with all agencies.');
      // In production, this would trigger a CSV download
    }
    
    function exportClients() {
      alert('Exporting clients to CSV...\n\nIn production, this would download a CSV file with all clients.');
      // In production, this would trigger a CSV download
    }
    
    function exportScans() {
      alert('Exporting scans to CSV...\n\nIn production, this would download a CSV file with all scans.');
      // In production, this would trigger a CSV download
    }
    
    function clearCache() {
      if (!confirm('Are you sure you want to clear all cached scan results?')) return;
      
      alert('Cache cleared!\n\nIn production, this would remove all cached data from the database.');
      
      // In production:
      // await fetch('/api/admin/cache/clear', {
      //   method: 'POST',
      //   headers: { 'x-admin-key': localStorage.getItem('admin_id') }
      // });
    }
    
    function resetStats() {
      if (!confirm('âš ï¸ WARNING: This will reset ALL platform statistics!\n\nThis action CANNOT be undone!\n\nAre you absolutely sure?')) return;
      
      alert('Statistics reset!\n\nIn production, this would reset all counters in the database.');
      
      // In production:
      // await fetch('/api/admin/stats/reset', {
      //   method: 'POST',
      //   headers: { 'x-admin-key': localStorage.getItem('admin_id') }
      // });
    }
  </script>
</body>
</html>
